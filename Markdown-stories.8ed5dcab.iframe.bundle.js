"use strict";(self.webpackChunkag_common=self.webpackChunkag_common||[]).push([[1156],{"./stories/Markdown.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/jsx-runtime.js"),_src_ui_components_Markdown__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/index.js"),__webpack_require__("./src/ui/components/Markdown/index.tsx"));const app={title:"UI/Markdown",component:_src_ui_components_Markdown__WEBPACK_IMPORTED_MODULE_2__.o},Primary=(args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_ui_components_Markdown__WEBPACK_IMPORTED_MODULE_2__.o,{...args})})).bind({});Primary.args={markdown:"# h1\n## h2\n### h3\n\n** bold ** not bold ** bold **\n\n| Tables   |      Are      |  Cool |\n|----------|:-------------:|------:|\n| col 1 is |  left-aligned | $1600 |\n| col 2 is |    centered   |   $12 |\n| col 3 is | right-aligned |    $1 |\n\n1. 1\n2. 2\n3. 3\n\n* a\n* b\n* c\n\n- a\n- b\n- c\n\nnormal text\n\n"};const __WEBPACK_DEFAULT_EXPORT__=app,__namedExportsOrder=["Primary"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"args => <div style={{}}>\n    <Markdown {...args} />\n  </div>",...Primary.parameters?.docs?.source}}}},"./src/common/helpers/array.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ct:()=>flat,G:()=>arrayToObject,Kl:()=>findLastIndex,NV:()=>insertElementAtIndex,ey:()=>distinctBy,s:()=>take,z2:()=>notEmpty});const arrayToObject=(arr,keyF,valueF)=>{const ret={};return arr&&keyF?(arr.forEach((v=>{const k=keyF(v);ret[k]=valueF(v)})),ret):ret},flat=arr=>[].concat(...arr),take=(array,num)=>{const safeNum=Math.max(0,Math.min(num,array.length));return{part:array.slice(0,safeNum),rest:array.slice(safeNum)}},notEmpty=value=>null!=value&&!1!==value&&""!==value;function distinctBy(data,key,ignoreEmpty){if(!data||0===data.length)return data;const hashSet=new Set;return data.filter((x=>{let keyVal;return keyVal="string"==typeof key?x[key]:key(x),!(!keyVal&&ignoreEmpty)&&(!hashSet.has(keyVal)&&(hashSet.add(keyVal),!0))}))}function findLastIndex(arr,predicate){for(let i=arr.length-1;i>=0;i--)if(predicate(arr[i],i,arr))return i;return-1}const insertElementAtIndex=(arr,element,index)=>[...arr.slice(0,index),element,...arr.slice(index)]},"./src/common/helpers/date.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AC:()=>dateDiff,SP:()=>dayInMs,fi:()=>addDays,iO:()=>twelveHMs});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/common/helpers/math.ts");const addDays=(dIn,count)=>{const d=new Date(dIn);return d.setDate(d.getDate()+count),d},dateDiff=(lowDate,highDate)=>{const ticksSince=(highDate??new Date).getTime()-lowDate.getTime(),totalMinutes=(0,_math__WEBPACK_IMPORTED_MODULE_0__.Cz)(ticksSince/1e3/60,0),totalHours=(0,_math__WEBPACK_IMPORTED_MODULE_0__.Cz)(totalMinutes/60,0),totalDays=(0,_math__WEBPACK_IMPORTED_MODULE_0__.Cz)(totalHours/24,0);return{totalMinutes,totalHours,totalDays,totalYears:(0,_math__WEBPACK_IMPORTED_MODULE_0__.Cz)(totalDays/365,0)}},dayInMs=864e5,twelveHMs=432e5},"./src/common/helpers/groupBy.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function groupByList(arr,getKey){const ret=[];return arr.forEach((item=>{const key=getKey(item),i=ret.find((r=>r.key===key));i?i.items.push(item):ret.push({key,items:[item]})})),ret}__webpack_require__.d(__webpack_exports__,{Bg:()=>groupByList})},"./src/common/helpers/log.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z3:()=>error,R8:()=>warn});var array=__webpack_require__("./src/common/helpers/array.ts");function redactString(str){let ret=str;ret=ret||"";const repl="$1<redacted>$2";return ret=ret.replace(/(\b)grant_type.+?(\b)/gm,repl),ret=ret.replace(/(\b)Bearer .+?(\b)/gm,repl),ret=ret.replace(/(eyJ[\w-_.]*\.[\w-_.]*\.[\w-_.]*)/gim,"<redacted>"),ret}var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");const GetLogLevel=l=>["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"].findIndex((s=>s===l));let logShim;let userLogLevel;function logprocess(type,args){userLogLevel||(l=>{const lu=(l??"INFO").toUpperCase();-1!==GetLogLevel(lu)&&(userLogLevel=lu)})(process.env.LOG_LEVEL);const min=GetLogLevel(userLogLevel??"WARN");if(GetLogLevel(type)<min)return;const log=[`[${(new Date).toLocaleTimeString("en-GB")}]`,type,...args.filter(array.z2).map((s=>function redactObject(ob){if("string"==typeof ob)return redactString(ob);if("object"==typeof ob)try{return JSON.parse(redactString(JSON.stringify(ob)))}catch(e){return ob}return ob}(s)))];if(logShim)logShim(...log);else switch(type){case"TRACE":console.trace(...log);break;case"DEBUG":console.debug(...log);break;case"INFO":default:console.log(...log);break;case"WARN":console.warn(...log);break;case"ERROR":case"FATAL":console.error(...log)}}function printStackTrace(...args){const callstack=[];let isCallstackPopulated=!1;try{throw new Error("Test")}catch(e){const er=e;if(er.stack){const lines=er.stack.split("\n");for(let i=0,len=lines.length;i<len;i+=1)callstack.push(` ${lines[i]} `);callstack.shift(),isCallstackPopulated=!0}else if(window.opera&&er.message){const lines=er.message.split("\n");for(let i=0,len=lines.length;i<len;i+=1)if(lines[i].match(/^\s*[A-Za-z0-9\-_$]+\(/)){let entry=lines[i];lines[i+1]&&(entry+=` at ${lines[i+1]}`,i+=1),callstack.push(entry)}callstack.shift(),isCallstackPopulated=!0}}if(!isCallstackPopulated){let currentFunction=args.callee.caller;for(;currentFunction;){const fn=currentFunction.toString(),fname=fn.substring(fn.indexOf("function")+8,fn.indexOf("("))??"anonymous";callstack.push(fname),currentFunction=currentFunction.caller}}return callstack.join("\n")}const warn=(...args)=>logprocess("WARN",args),error=(...args)=>{args.push(printStackTrace()),logprocess("ERROR",args)}},"./src/common/helpers/math.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cz:()=>toFixedDown,RM:()=>sumArray,gO:()=>rangePercentage});function sumArray(array){return array.reduce(((a,b)=>a+b),0)}function toFixedDown(num,scale){if(!`${num}`.includes("e"))return+`${Math.round(`${num}e+${scale}`)}e-${scale}`;const arr=`${num}`.split("e");let sig="";return+arr[1]+scale>0&&(sig="+"),+`${Math.round(`${+arr[0]}e${sig}${+arr[1]+scale}`)}e-${scale}`}function rangePercentage({value,min,max}){const v=function clamp({value,min,max}){return value<min?min:value>max?max:value}({value,min,max}),r=(v-min)/(max-min);return isNaN(r)?0:r}},"./src/common/helpers/stream.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__("./src/common/helpers/log.ts")},"./src/common/helpers/string/base64.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>fromBase64,n:()=>toBase64});var buffer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js");const toBase64=str=>buffer__WEBPACK_IMPORTED_MODULE_0__.hp.from(str).toString("base64"),fromBase64=str=>buffer__WEBPACK_IMPORTED_MODULE_0__.hp.from(decodeURIComponent(str),"base64").toString()},"./src/common/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ey:()=>array.ey,Bg:()=>groupBy.Bg,s5:()=>hashCode_hashCode,iO:()=>date.iO});var array=__webpack_require__("./src/common/helpers/array.ts");__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js"),__webpack_require__("./src/common/helpers/string/base64.ts");var date=__webpack_require__("./src/common/helpers/date.ts");__webpack_require__("./src/common/helpers/log.ts");var groupBy=__webpack_require__("./src/common/helpers/groupBy.ts");const hashCode_hashCode=(str,seed=0)=>((str,seed=0)=>{if(!str)return 0;let h1=3735928559^seed,h2=1103547991^seed;for(let ch,i=0;i<str.length;i+=1)ch=str.charCodeAt(i),h1=Math.imul(h1^ch,2654435761),h2=Math.imul(h2^ch,1597334677);return h1=Math.imul(h1^h1>>>16,2246822507)^Math.imul(h2^h2>>>13,3266489909),h2=Math.imul(h2^h2>>>16,2246822507)^Math.imul(h1^h1>>>13,3266489909),4294967296*(2097151&h2)+(h1>>>0)})(str,seed).toString();__webpack_require__("./src/common/helpers/stream.ts")},"./src/ui/components/Markdown/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>Markdown});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/jsx-runtime.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/.pnpm/@emotion+styled@11.14.0_@emotion+react@11.14.0_@types+react@19.1.2_react@19.1.0__@types+react@19.1.2_react@19.1.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),common=(__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/index.js"),__webpack_require__("./src/common/index.ts")),array=__webpack_require__("./src/common/helpers/array.ts");function trimSide(str,fromStart=!0,...params){const pstr=params.join("");if(!str)return str;const ret=str.replace(new RegExp(`[${pstr}]*$`,"g"),"");return fromStart?ret.replace(new RegExp(`^[${pstr}]*`,"g"),""):ret}const injectTable=({tableRows,preprocessText})=>(0,jsx_runtime.jsxs)("table",{children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsx)("tr",{children:tableRows[0].split("|").map((header=>header.trim())).map((header=>(0,jsx_runtime.jsx)("th",{children:preprocessText(header)},header)))})}),(0,jsx_runtime.jsx)("tbody",{children:tableRows.slice(2).map((row=>{const cells=row.split("|").map((cell=>cell.trim()));return(0,jsx_runtime.jsx)("tr",{children:cells.map((cell=>(0,jsx_runtime.jsx)("td",{children:preprocessText(cell)},cell)))},row)}))})]},(0,common.s5)(JSON.stringify(tableRows))),injectGroup=({output,pos,wrap})=>{const outputEndIndex=output.length,sum=[];for(let a=pos.outputIndex;a<=outputEndIndex;a+=1)sum.push(output[a]),delete output[a];return output=(0,array.NV)(output,wrap(sum),pos.outputIndex)};function renderMarkdown({markdown,preprocessText=s=>s}){const lines=markdown.split("\n");let ol,ul,output=[],tableRows=[],a=-1;do{a+=1;const line=lines[a]??"",la=line+a,star=/\*\*(.*?)\*\*/gim;if(line.match(star))output.push((0,jsx_runtime.jsx)("p",{dangerouslySetInnerHTML:{__html:line.replace(star,"<b>$1</b>").trim()}},la));else if(line.startsWith("|"))tableRows.push(line);else if(tableRows.length>0&&(output.push(injectTable({tableRows,preprocessText})),tableRows=[]),line.match(/^[0-9]+\./gim)?void 0===ol&&(ol={matchLine:line,outputIndex:output.length}):ol&&ol.matchLine!==line&&(output=injectGroup({output,pos:ol,wrap:i=>(0,jsx_runtime.jsx)("ol",{children:i},i[0].key)}),ol=void 0),line.startsWith("-")||line.startsWith("*")?void 0===ul&&(ul={matchLine:line,outputIndex:output.length}):ul&&ul.matchLine!==line&&(output=injectGroup({output,pos:ul,wrap:i=>(0,jsx_runtime.jsx)("ul",{children:i},i[0].key)}),ul=void 0),line.startsWith("#")){const level=line.match(/^#+/)?.[0]?.length??0,t=trimSide(line,!0,"#").trim();1===level?output.push((0,jsx_runtime.jsx)("h1",{children:preprocessText(t)},t)):2===level?output.push((0,jsx_runtime.jsx)("h2",{children:preprocessText(t)},t)):3===level?output.push((0,jsx_runtime.jsx)("h3",{children:preprocessText(t)},t)):4===level?output.push((0,jsx_runtime.jsx)("h4",{children:preprocessText(t)},t)):5===level?output.push((0,jsx_runtime.jsx)("h5",{children:preprocessText(t)},t)):level>=6&&output.push((0,jsx_runtime.jsx)("h6",{children:preprocessText(t)},t))}else if(line.startsWith("*")||line.startsWith("-")){const t=line.slice(2).trim();t.length>0&&output.push((0,jsx_runtime.jsx)("li",{children:preprocessText(t)},t))}else if(line.match(/^[0-9]+\./gim)){const t=line.slice(3).trim();t.length>0&&output.push((0,jsx_runtime.jsx)("li",{children:preprocessText(t)},t))}else line.length>0&&output.push((0,jsx_runtime.jsx)("p",{children:preprocessText(line)},la))}while(a<lines.length);return output}const Base=emotion_styled_browser_esm.A.div`
  > * {
    margin: 0;
    white-space: pre-wrap;
  }
  ul {
    display: grid;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  ol,
  ul,
  table {
    margin-bottom: 1rem;
  }
`,Markdown=p=>(0,jsx_runtime.jsx)(Base,{className:p.className,children:renderMarkdown({preprocessText:p.preprocessText,markdown:p.markdown.trim()})});Markdown.__docgenInfo={description:"",methods:[],displayName:"Markdown",props:{markdown:{required:!0,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},preprocessText:{required:!1,tsType:{name:"signature",type:"function",raw:"(s: string) => string | JSX.Element",signature:{arguments:[{type:{name:"string"},name:"s"}],return:{name:"union",raw:"string | JSX.Element",elements:[{name:"string"},{name:"JSX.Element"}]}}},description:"run after html is generated for markdown, but before applied"}}}}}]);
//# sourceMappingURL=Markdown-stories.8ed5dcab.iframe.bundle.js.map