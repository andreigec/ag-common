"use strict";(self.webpackChunkag_common=self.webpackChunkag_common||[]).push([[5666],{"./stories/DarkMode.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultWithArgs:()=>DefaultWithArgs,Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/jsx-runtime.js"),_src_ui_components_DarkMode__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/index.js"),__webpack_require__("./src/ui/components/DarkMode/index.tsx"));const base={title:"UI/DarkMode",component:_src_ui_components_DarkMode__WEBPACK_IMPORTED_MODULE_2__.QQ},Primary=(args=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{backgroundColor:"white",padding:"0.5rem"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src_ui_components_DarkMode__WEBPACK_IMPORTED_MODULE_2__.QQ,{...args})})).bind({});Primary.args={onSubmit:m=>alert("mode="+m),iconSize:"2rem",cookieDocument:""};const __WEBPACK_DEFAULT_EXPORT__=base,DefaultWithArgs=()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Primary,{...Primary.args}),__namedExportsOrder=["Primary","DefaultWithArgs"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"args => <div style={{\n  backgroundColor: 'white',\n  padding: '0.5rem'\n}}>\n    <DarkMode {...args} />\n  </div>",...Primary.parameters?.docs?.source}}},DefaultWithArgs.parameters={...DefaultWithArgs.parameters,docs:{...DefaultWithArgs.parameters?.docs,source:{originalSource:"() => <Primary {...Primary.args as IDarkMode} />",...DefaultWithArgs.parameters?.docs?.source}}}},"./src/common/helpers/log.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z3:()=>error,R8:()=>warn});var array=__webpack_require__("./src/common/helpers/array.ts");function redactString(str){let ret=str;ret=ret||"";const repl="$1<redacted>$2";return ret=ret.replace(/(\b)grant_type.+?(\b)/gm,repl),ret=ret.replace(/(\b)Bearer .+?(\b)/gm,repl),ret=ret.replace(/(eyJ[\w-_.]*\.[\w-_.]*\.[\w-_.]*)/gim,"<redacted>"),ret}var process=__webpack_require__("./node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");const GetLogLevel=l=>["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"].findIndex((s=>s===l));let logShim;let userLogLevel;function logprocess(type,args){userLogLevel||(l=>{const lu=(l??"INFO").toUpperCase();-1!==GetLogLevel(lu)&&(userLogLevel=lu)})(process.env.LOG_LEVEL);const min=GetLogLevel(userLogLevel??"WARN");if(GetLogLevel(type)<min)return;const log=[`[${(new Date).toLocaleTimeString("en-GB")}]`,type,...args.filter(array.z2).map((s=>function redactObject(ob){if("string"==typeof ob)return redactString(ob);if("object"==typeof ob)try{return JSON.parse(redactString(JSON.stringify(ob)))}catch(e){return ob}return ob}(s)))];if(logShim)logShim(...log);else switch(type){case"TRACE":console.trace(...log);break;case"DEBUG":console.debug(...log);break;case"INFO":default:console.log(...log);break;case"WARN":console.warn(...log);break;case"ERROR":case"FATAL":console.error(...log)}}function printStackTrace(...args){const callstack=[];let isCallstackPopulated=!1;try{throw new Error("Test")}catch(e){const er=e;if(er.stack){const lines=er.stack.split("\n");for(let i=0,len=lines.length;i<len;i+=1)callstack.push(` ${lines[i]} `);callstack.shift(),isCallstackPopulated=!0}else if(window.opera&&er.message){const lines=er.message.split("\n");for(let i=0,len=lines.length;i<len;i+=1)if(lines[i].match(/^\s*[A-Za-z0-9\-_$]+\(/)){let entry=lines[i];lines[i+1]&&(entry+=` at ${lines[i+1]}`,i+=1),callstack.push(entry)}callstack.shift(),isCallstackPopulated=!0}}if(!isCallstackPopulated){let currentFunction=args.callee.caller;for(;currentFunction;){const fn=currentFunction.toString(),fname=fn.substring(fn.indexOf("function")+8,fn.indexOf("("))??"anonymous";callstack.push(fname),currentFunction=currentFunction.caller}}return callstack.join("\n")}const warn=(...args)=>logprocess("WARN",args),error=(...args)=>{args.push(printStackTrace()),logprocess("ERROR",args)}},"./src/common/helpers/string/base64.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>fromBase64,n:()=>toBase64});var buffer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js");const toBase64=str=>buffer__WEBPACK_IMPORTED_MODULE_0__.hp.from(str).toString("base64"),fromBase64=str=>buffer__WEBPACK_IMPORTED_MODULE_0__.hp.from(decodeURIComponent(str),"base64").toString()},"./src/ui/components/DarkMode/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{QQ:()=>DarkMode});var jsx_runtime=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/jsx-runtime.js"),emotion_styled_browser_esm=__webpack_require__("./node_modules/.pnpm/@emotion+styled@11.14.0_@emotion+react@11.14.0_@types+react@19.1.2_react@19.1.0__@types+react@19.1.2_react@19.1.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js"),react=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/index.js"),use=__webpack_require__("./src/ui/helpers/cookie/use.ts"),icons=__webpack_require__("./src/ui/icons/index.tsx"),FlexColumn=__webpack_require__("./src/ui/components/FlexColumn/index.tsx"),Icon=__webpack_require__("./src/ui/components/Icon/index.tsx"),TDarkMode=function(TDarkMode){return TDarkMode[TDarkMode.dark=0]="dark",TDarkMode[TDarkMode.light=1]="light",TDarkMode[TDarkMode.system=2]="system",TDarkMode}({}),TDarkModeCalc=function(TDarkModeCalc){return TDarkModeCalc[TDarkModeCalc.dark=0]="dark",TDarkModeCalc[TDarkModeCalc.light=1]="light",TDarkModeCalc}({});const Base=emotion_styled_browser_esm.A.div`
  display: flex;
  flex-flow: row;
  &[data-mode='vert'] {
    flex-flow: column;
  }
  overflow: hidden;
  justify-content: space-between;
  border-radius: 2rem;
`,IconStyled=(0,emotion_styled_browser_esm.A)(Icon.I)`
  > svg {
    height: 60%;
  }
`,Label=(0,emotion_styled_browser_esm.A)(FlexColumn.I)`
  border-radius: 50%;
  overflow: hidden;
  cursor: pointer;

  &[data-selected='true'] {
    background-color: white;
    cursor: default;
  }
`,modes=[{mode:TDarkMode.dark,icon:icons.Moon},{mode:TDarkMode.system,icon:icons.Computer},{mode:TDarkMode.light,icon:icons.Sun}],DarkModeAux=({iconSize="2.5rem",className,mode,onSubmit,style,dm})=>{const[index,setIndex]=(0,react.useState)(modes.findIndex((d=>d.mode===dm.darkmode))),[fill,background]=((p,vert)=>{const deg=vert?"180deg":"90deg";switch(p){case TDarkMode.dark:{const d1="rgba(173,128,227,1)";return[d1,`linear-gradient(${deg}, ${d1} 0%, rgba(106,44,181,1) 76%)`]}case TDarkMode.light:{const l1="rgba(255,169,54,1)";return[l1,`linear-gradient(${deg}, ${l1} 0%, rgba(255,189,100,1) 76%)`]}case TDarkMode.system:return["green","green"]}})(modes[index].mode,"vert"===mode),twCalc=`calc(${iconSize} + ${iconSize} + ${iconSize} )`;return(0,jsx_runtime.jsx)(Base,{className,"data-mode":mode??"horiz",style:{...style,background,border:`solid 2px ${fill}`,width:twCalc,height:iconSize,..."vert"===mode&&{width:iconSize,height:twCalc}},children:modes.map(((v,i)=>{const selected=index===i;return(0,jsx_runtime.jsx)(Label,{"data-selected":selected,style:{width:iconSize,height:iconSize},onClick:()=>{index!==i&&(setIndex(i),(newDarkMode=>{let className="";newDarkMode===TDarkMode.dark?className+="dark-mode":newDarkMode===TDarkMode.light?className+="light-mode":className="";try{document.getElementsByTagName("html")[0].classList.remove("dark-mode"),document.getElementsByTagName("html")[0].classList.remove("light-mode"),className&&document.getElementsByTagName("html")[0].classList.add(className)}catch(e){}dm.setDarkmode(newDarkMode),onSubmit?.(newDarkMode)})(v.mode))},children:(0,jsx_runtime.jsx)(IconStyled,{children:v.icon({style:{fill:selected?fill:"white"}})})},i.toString())}))})},DarkMode=p=>{const dm=(({cookieDocument})=>{const[darkmode,setDarkmode]=(0,use.GH)({defaultValue:TDarkMode.system,name:"darkmode",cookieDocument,parse:v=>Number(v),stringify:v=>v.toString()});return{darkmode,setDarkmode,calcDarkMode:()=>{const isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches;return darkmode===TDarkMode.system?isDarkMode?TDarkModeCalc.dark:TDarkModeCalc.light:darkmode===TDarkMode.dark?TDarkModeCalc.dark:TDarkModeCalc.light}}})({cookieDocument:p.cookieDocument});return DarkModeAux({...p,dm})};DarkModeAux.__docgenInfo={description:"shows darkmode toggle. Persists to cookie, and modifies html classList with either dark-mode or light-mode\nthis method has the darkmode passed in, so UseDarkMode can be used globally",methods:[],displayName:"DarkModeAux",props:{onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(p: TDarkMode) => void",signature:{arguments:[{type:{name:"TDarkMode"},name:"p"}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:"'vert' | 'horiz'",elements:[{name:"literal",value:"'vert'"},{name:"literal",value:"'horiz'"}]},description:"default horiz"},iconSize:{required:!1,tsType:{name:"string"},description:"default 2.5rem",defaultValue:{value:"'2.5rem'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},cookieDocument:{required:!0,tsType:{name:"string"},description:""},dm:{required:!0,tsType:{name:"IUseDarkMode"},description:""}}},DarkMode.__docgenInfo={description:"shows darkmode toggle. Persists to cookie, and modifies html classList with either dark-mode or light-mode",methods:[],displayName:"DarkMode",props:{onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(p: TDarkMode) => void",signature:{arguments:[{type:{name:"TDarkMode"},name:"p"}],return:{name:"void"}}},description:""},mode:{required:!1,tsType:{name:"union",raw:"'vert' | 'horiz'",elements:[{name:"literal",value:"'vert'"},{name:"literal",value:"'horiz'"}]},description:"default horiz"},iconSize:{required:!1,tsType:{name:"string"},description:"default 2.5rem"},className:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},cookieDocument:{required:!0,tsType:{name:"string"},description:""}}}},"./src/ui/components/FlexColumn/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>FlexColumn});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/jsx-runtime.js"),_emotion_styled__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@emotion+styled@11.14.0_@emotion+react@11.14.0_@types+react@19.1.2_react@19.1.0__@types+react@19.1.2_react@19.1.0/node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js");__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/index.js");const Base=_emotion_styled__WEBPACK_IMPORTED_MODULE_1__.A.div`
  position: relative;
  display: flex;
  flex-flow: column;
  flex-grow: 1;
  width: 100%;
  height: 100%;
  &[data-center='true'] {
    justify-content: center;
    align-items: center;
  }
  &[data-nogrow='true'] {
    flex-grow: 0;
    width: unset;
    height: unset;
  }
`,FlexColumn=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Base,{"data-nogrow":props.noGrow??!1,"data-center":props.center??!1,...props,children:props.children});FlexColumn.__docgenInfo={description:"",methods:[],displayName:"FlexColumn",props:{noGrow:{required:!1,tsType:{name:"boolean"},description:""},center:{required:!1,tsType:{name:"boolean"},description:""},noWrap:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactNode"},description:""},className:{required:!1,tsType:{name:"string"},description:""},break:{required:!1,tsType:{name:"union",raw:"'small' | 'vsmall'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'vsmall'"}]},description:""},style:{required:!1,tsType:{name:"CSSProperties"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}}},"./src/ui/helpers/cookie/const.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>maxCookieLen,a:()=>expireDate});const expireDate="Thu, 01 Jan 1970 00:00:00 UTC",maxCookieLen=4e3},"./src/ui/helpers/cookie/get.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>getCookieRawWrapper});var _common_helpers_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/common/helpers/log.ts"),_common_helpers_string_base64__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/common/helpers/string/base64.ts"),_raw__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ui/helpers/cookie/raw.ts");function getCookieRawWrapper({name,cookieDocument,defaultValue,parse:parseRaw}){let raw="",currentCount=0;for(;;){const newv=(0,_raw__WEBPACK_IMPORTED_MODULE_2__.Ri)({name:name+currentCount,cookieDocument});if(void 0===newv)break;raw+=newv,currentCount+=1}try{return raw?null==(s=(0,_common_helpers_string_base64__WEBPACK_IMPORTED_MODULE_1__.E)(raw))?defaultValue:parseRaw?parseRaw(s):JSON.parse(s):defaultValue}catch(e){return(0,_common_helpers_log__WEBPACK_IMPORTED_MODULE_0__.R8)("cookie error:",e),(0,_raw__WEBPACK_IMPORTED_MODULE_2__.ft)(name),defaultValue}var s}},"./src/ui/helpers/cookie/raw.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ri:()=>getCookie,TV:()=>setCookie,ft:()=>wipeCookies});var _common_helpers_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/common/helpers/log.ts"),_const__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ui/helpers/cookie/const.ts");const getCookie=({name,cookieDocument})=>(cookieString=>{const cookieKeyValuePairs={};if(!cookieString)return cookieKeyValuePairs;const cookieArr=cookieString.split(";");for(let i=0;i<cookieArr.length;i++){const cookieKeyValue=cookieArr[i].split("=");cookieKeyValuePairs[cookieKeyValue[0].trim()]=cookieKeyValue[1]?.trim()}return cookieKeyValuePairs})(cookieDocument)[name];function setCookie({name,value,expiryDays=1}){if("undefined"==typeof window)return;const d=new Date;d.setTime(d.getTime()+24*expiryDays*60*60*1e3);const expires=`expires=${!value||expiryDays<0?_const__WEBPACK_IMPORTED_MODULE_1__.a:d.toUTCString()}`;document.cookie=`${name}=${value||""};${expires};path=/; SameSite=Strict; Secure`}function wipeCookies(name){if("undefined"==typeof window)return void(0,_common_helpers_log__WEBPACK_IMPORTED_MODULE_0__.R8)("cant wipe cookies on server");let currentCount=0;for(;;){if(!getCookie({name:name+currentCount,cookieDocument:document.cookie}))return;setCookie({name:name+currentCount,value:"",expiryDays:-1}),currentCount+=1}}},"./src/ui/helpers/cookie/set.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>setCookieRawWrapper});var base64=__webpack_require__("./src/common/helpers/string/base64.ts");const chunkString=(str,length)=>str.match(new RegExp(`.{1,${length}}`,"g"));var cookie_const=__webpack_require__("./src/ui/helpers/cookie/const.ts"),raw=__webpack_require__("./src/ui/helpers/cookie/raw.ts");function setCookieRawWrapper(p){if((0,raw.ft)(p.name),void 0===p.value)return;const str=(0,base64.n)((s=p.value,p.stringify?p.stringify(s):JSON.stringify(s)));var s;const chunks=chunkString(str,cookie_const.A);for(const index1 in chunks){const chunk=chunks[index1];(0,raw.TV)({...p,name:p.name+index1,value:chunk})}}},"./src/ui/helpers/cookie/use.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{GH:()=>useCookie});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@19.1.0/node_modules/react/index.js"),_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/ui/helpers/cookie/get.ts"),_set__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/ui/helpers/cookie/set.ts");function useCookie(p){const stringify=s=>p.stringify?p.stringify(s):JSON.stringify(s),[cookie,setCookie]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)((0,_get__WEBPACK_IMPORTED_MODULE_1__.E)({...p,parse:s=>s?p.parse?p.parse(s):JSON.parse(s):p.defaultValue})??p.defaultValue);return[cookie,valueRaw=>{const value=valueRaw instanceof Function?valueRaw(cookie):valueRaw;(0,_set__WEBPACK_IMPORTED_MODULE_2__.G)({...p,stringify,value}),setCookie(value)}]}}}]);
//# sourceMappingURL=5666.89cd1004.iframe.bundle.js.map